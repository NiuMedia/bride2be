<!DOCTYPE html>
<html>
<head>
  <meta charset="utf8">
  <title>Drawer Example</title>

  <link rel="stylesheet" href="/vendor/topcoat/css/topcoat-mobile-dark.css" />
  <link rel="stylesheet" href="/stylesheets/application.css" />
  <link href='http://localhost/fonts/SourceSansPro-light.ttf' rel='stylesheet' type='text/css'>

  <script src="/javascripts/onerror.js"></script>
  <script src="/javascripts/json2.js"></script>

  <!-- cordova.js is served from localhost to ensure the correct version -->
  <script src="http://localhost/appgyver/cordova.js"></script>
  <script src="/components/steroids-js/steroids.js"></script>

  <script src="/components/jquery/jquery.min.js"></script>

  <!-- Controllers can be loaded dynamically based on the resource name -->
  <script src="/controllers/drawerExample.js"></script> 


</head>
<body>

  <div class="content-padded fondo">
  <div class="card">
    <h1 class="pink center">Configuración</h1>
      <form>
        <label for="novia">Nombre de la novia</label>
        <input type="text" class="topcoat-text-input center wide" name="novia" id="novia"><br><br>
        <label for="novio">Nombre del novio</label>
        <input type="text" class="topcoat-text-input center wide" name="novio" id="novio"><br><br>
        <label for="lugar">Lugar</label><br>
        <select class="topcoat-text-input center wide black" name="lugar" id="lugar">
          <option value="San Luis Potosí">San Luis Potosí</option>
          <option value="Queretaro">Querétaro</option>
        </select><br><br>
        <label for="fecha">Fecha de la Boda</label><br>
        <input type="date" class="topcoat-text-input center wide black" name="fecha" id="fecha"><br><br>
        <center><img id="foto" class="picture" src=""/></center><br>
        <div class="topcoat-button center full" id="getPic-btn">Seleccionar Portada</div><br><br>
        <div class="topcoat-button center" id="save-btn">Guardar</div><br>
      </form>
      <script type="text/javascript">
        $(document).ready(function(){
          rellenarInfo();
          $("#save-btn").on("click", function(){
            window.localStorage.setItem("novio", $("#novio").val());
            window.localStorage.setItem("novia", $("#novia").val());
            window.localStorage.setItem("lugar", $("#lugar").val());
            window.localStorage.setItem("fecha", $("#fecha").val());
            rellenarInfo();

            alert("Información guardada correctamente");

            webView = new steroids.views.WebView("http://localhost/views/drawerExample/home.html");
            steroids.layers.push(webView);
            
          });

          $("#getPic-btn").on("click", function(){
            navigator.camera.getPicture( function(imageData){
              window.localStorage.setItem("foto", imageData);
            }, function(msg){
              alert(msg);
            }, {
              sourceType : Camera.PictureSourceType.PHOTOLIBRARY,
              destinationType : Camera.DestinationType.DATA_URL,
              correctOrientation: true
            });
             $("#foto").attr("src", "data:image/jpeg;base64,"+window.localStorage.getItem("foto"));
          });

        function rellenarInfo(){
          //Rellena los datos, segun la informacion guardada
          $("#novio").val(window.localStorage.getItem("novio"));
          $("#novia").val(window.localStorage.getItem("novia"));
          $("#lugar").val(window.localStorage.getItem("lugar"));
          $("#fecha").val(window.localStorage.getItem("fecha"));
          cambiarfoto();
        }
        function cambiarfoto(){
          $("#foto").attr("src", "data:image/jpeg;base64,"+window.localStorage.getItem("foto"));
        }
        });
      </script>
  </div>    
</div>


  
</body>
</html>
