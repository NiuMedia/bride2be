<!DOCTYPE html>
<html>
<head>
  <meta charset="utf8">
  <title>Drawer Example</title>

  <link rel="stylesheet" href="/vendor/topcoat/css/topcoat-mobile-light.css" />
  <link rel="stylesheet" href="/stylesheets/application.css" />
  <link href='http://localhost/fonts/SourceSansPro-light.ttf' rel='stylesheet' type='text/css'>

  <script src="/javascripts/onerror.js"></script>
  <script src="/javascripts/json2.js"></script>

  <!-- cordova.js is served from localhost to ensure the correct version -->
  <script src="http://localhost/appgyver/cordova.js"></script>
  <script src="/components/steroids-js/steroids.js"></script>

  <script src="/components/jquery/jquery.min.js"></script>

  <!-- Controllers can be loaded dynamically based on the resource name -->
  <script src="/controllers/drawerExample.js"></script> 


</head>
<body>

  <div class="content-padded" style="height:100%">
  <h1 id="titulo">0 invitados</h1>
  <div class="topcoat-list">
  	<h3 class="topcoat-list__header">Invitados</h3>
	  <ul class="topcoat-list__container less-padding" id="lista-invitados">
	  </ul>
	</div>
	<div class="topcoat-button center" id="add-guest">Nuevo invitado</div>
</div>
<script type="text/javascript">
	$(document).ready(function(){
		$("#add-guest").on("click", function(){
			webView = new steroids.views.WebView("http://localhost/views/drawerExample/nuevo_invitado.html");
          	steroids.layers.push(webView);   
		});
		if(window.localStorage.getItem("invitados") != null){
			json = $.parseJSON(window.localStorage.getItem("invitados"));
			$("#titulo").text(json.invitados.length + " invitados");
			for(x in json.invitados){
				html = '<li class="topcoat-list__item" class="invitado" id="' + json.invitados[x].nombre + '">' +
		  	    	'<span>' + json.invitados[x].nombre + '</span> ' +
		  	    	'<div class="acciones-invitados">  ' +
		  	    		'<label class="topcoat-checkbox guest-action"> ' +
		  	    			'Personas ' +
	  						'<input class="center-element" type="checkbox" disabled> ' +
	  						'<div class="topcoat-checkbox__checkmark"></div> ' +
						'</label> ' +
		  	    		'<label class="topcoat-checkbox guest-action"> ' +
		  	    			'Invitacion ' +
	  						'<input class="center-element" type="checkbox" disabled> ' +
	  						'<div class="topcoat-checkbox__checkmark"></div> ' +
						'</label> ' +
		  	    		'<label class="topcoat-checkbox guest-action"> ' +
		  	    			'RSVP ' +
	  						'<input class="center-element" type="checkbox" disabled> ' +
	  						'<div class="topcoat-checkbox__checkmark"></div>	 ' +
						'</label> ' +
		  	    		'<label class="topcoat-checkbox guest-action"> ' +
		  	    			'Regalo ' +
	  						'<input class="center-element" type="checkbox" disabled> ' +
	  						'<div class="topcoat-checkbox__checkmark"></div> ' +
						'</label>  ' +
		  	    		'<label class="topcoat-checkbox guest-action"> ' +
		  	    			'Tarjeta ' +
	  						'<input class="center-element" type="checkbox" disabled> ' +
	  						'<div class="topcoat-checkbox__checkmark"></div> ' +
						'</label> ' +
		  	    	'</div> ' +
		  	    	'<div class="clearfix"></div> ' +
	  	    	'</li>';
	  	    	$("#lista-invitados").append(html);
	  	    	$(html).on("click", function(){
	  	    		alert(json.invitados[x].nombre);
					webView = new steroids.views.WebView("http://localhost/views/drawerExample/nuevo_invitado.html?nombre=" + json.invitados[x].nombre);
		          	steroids.layers.push(webView); 
	  	   		});
			}

		}
	});
</script>
  
</body>
</html>
